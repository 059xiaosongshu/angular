import { isBlank } from 'angular2/src/facade/lang';
import { Injector, THROW_IF_NOT_FOUND } from './injector';
/**
 * An simple injector based on a Map of values.
 */
export class MapInjector {
    constructor(_parent = null, values = null) {
        this._parent = _parent;
        if (isBlank(values)) {
            values = new Map();
        }
        this._values = values;
        if (isBlank(this._parent)) {
            this._parent = Injector.NULL;
        }
    }
    static createFactory(values) {
        return new MapInjectorFactory(values);
    }
    get(token, notFoundValue = THROW_IF_NOT_FOUND) {
        if (token === Injector) {
            return this;
        }
        if (this._values.has(token)) {
            return this._values.get(token);
        }
        return this._parent.get(token, notFoundValue);
    }
}
/**
 * InjectorFactory for MapInjector.
 */
export class MapInjectorFactory {
    constructor(_values = null) {
        this._values = _values;
    }
    create(parent = null, context = null) {
        return new MapInjector(parent, this._values);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwX2luamVjdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGlmZmluZ19wbHVnaW5fd3JhcHBlci1vdXRwdXRfcGF0aC14UkVySXpuRS50bXAvYW5ndWxhcjIvc3JjL2NvcmUvZGkvbWFwX2luamVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sMEJBQTBCO09BQ3pDLEVBQUMsUUFBUSxFQUFtQixrQkFBa0IsRUFBQyxNQUFNLFlBQVk7QUFFeEU7O0dBRUc7QUFDSDtJQU9FLFlBQW9CLE9BQU8sR0FBYSxJQUFJLEVBQUUsTUFBTSxHQUFrQixJQUFJO1FBQXRELFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQzFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsTUFBTSxHQUFHLElBQUksR0FBRyxFQUFZLENBQUM7UUFDL0IsQ0FBQztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQztRQUMvQixDQUFDO0lBQ0gsQ0FBQztJQWRELE9BQU8sYUFBYSxDQUFDLE1BQXNCO1FBQ3pDLE1BQU0sQ0FBQyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFhRCxHQUFHLENBQUMsS0FBVSxFQUFFLGFBQWEsR0FBUSxrQkFBa0I7UUFDckQsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdkIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNkLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ2hELENBQUM7QUFDSCxDQUFDO0FBRUQ7O0dBRUc7QUFDSDtJQUNFLFlBQW9CLE9BQU8sR0FBa0IsSUFBSTtRQUE3QixZQUFPLEdBQVAsT0FBTyxDQUFzQjtJQUFHLENBQUM7SUFFckQsTUFBTSxDQUFDLE1BQU0sR0FBYSxJQUFJLEVBQUUsT0FBTyxHQUFRLElBQUk7UUFDakQsTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0MsQ0FBQztBQUNILENBQUM7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNCbGFua30gZnJvbSAnYW5ndWxhcjIvc3JjL2ZhY2FkZS9sYW5nJztcbmltcG9ydCB7SW5qZWN0b3IsIEluamVjdG9yRmFjdG9yeSwgVEhST1dfSUZfTk9UX0ZPVU5EfSBmcm9tICcuL2luamVjdG9yJztcblxuLyoqXG4gKiBBbiBzaW1wbGUgaW5qZWN0b3IgYmFzZWQgb24gYSBNYXAgb2YgdmFsdWVzLlxuICovXG5leHBvcnQgY2xhc3MgTWFwSW5qZWN0b3IgaW1wbGVtZW50cyBJbmplY3RvciB7XG4gIHN0YXRpYyBjcmVhdGVGYWN0b3J5KHZhbHVlcz86IE1hcDxhbnksIGFueT4pOiBJbmplY3RvckZhY3Rvcnk8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBNYXBJbmplY3RvckZhY3RvcnkodmFsdWVzKTtcbiAgfVxuXG4gIHByaXZhdGUgX3ZhbHVlczogTWFwPGFueSwgYW55PjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9wYXJlbnQ6IEluamVjdG9yID0gbnVsbCwgdmFsdWVzOiBNYXA8YW55LCBhbnk+ID0gbnVsbCkge1xuICAgIGlmIChpc0JsYW5rKHZhbHVlcykpIHtcbiAgICAgIHZhbHVlcyA9IG5ldyBNYXA8YW55LCBhbnk+KCk7XG4gICAgfVxuICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcbiAgICBpZiAoaXNCbGFuayh0aGlzLl9wYXJlbnQpKSB7XG4gICAgICB0aGlzLl9wYXJlbnQgPSBJbmplY3Rvci5OVUxMO1xuICAgIH1cbiAgfVxuICBnZXQodG9rZW46IGFueSwgbm90Rm91bmRWYWx1ZTogYW55ID0gVEhST1dfSUZfTk9UX0ZPVU5EKTogYW55IHtcbiAgICBpZiAodG9rZW4gPT09IEluamVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKHRoaXMuX3ZhbHVlcy5oYXModG9rZW4pKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmdldCh0b2tlbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9wYXJlbnQuZ2V0KHRva2VuLCBub3RGb3VuZFZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEluamVjdG9yRmFjdG9yeSBmb3IgTWFwSW5qZWN0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXBJbmplY3RvckZhY3RvcnkgaW1wbGVtZW50cyBJbmplY3RvckZhY3Rvcnk8YW55PiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3ZhbHVlczogTWFwPGFueSwgYW55PiA9IG51bGwpIHt9XG5cbiAgY3JlYXRlKHBhcmVudDogSW5qZWN0b3IgPSBudWxsLCBjb250ZXh0OiBhbnkgPSBudWxsKTogSW5qZWN0b3Ige1xuICAgIHJldHVybiBuZXcgTWFwSW5qZWN0b3IocGFyZW50LCB0aGlzLl92YWx1ZXMpO1xuICB9XG59XG4iXX0=